<h4 class="mb-3 text-body mb-0">Megamenu Management</h4>
<div class="card">
    <div class="card-body">
        <!-- Edit Megamenu Button -->
        <div class="text-end mb-3">
            <button class="btn btn-primary btn-sm" data-bs-toggle="modal" data-bs-target="#editMegamenuModal">
                <span class="fas fa-edit me-2"></span>Add Megamenu
            </button>
        </div>

        <!-- Categories Table -->
        <div class="table-responsive mt-4">
            <table class="table table-hover">
                <thead>
                    <tr>
                        <th class="text-center">Image</th>
                        <th class="text-center">Title</th>
                        <th class="text-center">Description</th>
                        <th class="text-center">Active</th>
                        <th class="text-center">Action</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td class="text-center">
                            <img src="assets/img/gallery/15.png" alt="Technology" class="rounded" style="width: 50px; height: 50px; object-fit: cover;">
                        </td>
                        <td class="text-center">Technology</td>
                        <td class="text-center">Latest technology news and updates</td>
                        <td class="text-center">
                            <span class="badge badge-phoenix fs-10 badge-phoenix-success">
                                <span class="fa fa-check"></span>
                            </span>
                        </td>
                        <td class="text-center">
                            <button class="btn btn-sm btn-falcon-default text-danger" data-bs-toggle="modal" data-bs-target="#deleteCategoryModal">
                                <span class="fas fa-trash-alt"></span>
                            </button>
                            <button class="btn btn-sm btn-falcon-default text-warning" data-bs-toggle="modal" data-bs-target="#editCategoryModal">
                                <span class="fas fa-edit me-2"></span>Edit
                            </button>
                        </td>
                    </tr>
                    <tr>
                        <td class="text-center">
                            <img src="assets/img/gallery/19.png" alt="Cloud" class="rounded" style="width: 50px; height: 50px; object-fit: cover;">
                        </td>
                        <td class="text-center">Cloud</td>
                        <td class="text-center">Cloud computing and services</td>
                        <td class="text-center">
                            <span class="badge badge-phoenix fs-10 badge-phoenix-success">
                                <span class="fa fa-check"></span>
                            </span>
                        </td>
                        <td class="text-center">
                            <button class="btn btn-sm btn-falcon-default text-danger" data-bs-toggle="modal" data-bs-target="#deleteCategoryModal">
                                <span class="fas fa-trash-alt"></span>
                            </button>
                            <button class="btn btn-sm btn-falcon-default text-warning" data-bs-toggle="modal" data-bs-target="#editCategoryModal">
                                <span class="fas fa-edit me-2"></span>Edit
                            </button>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>

<!-- Add/Edit Megamenu Modal -->
<div class="modal fade" id="editMegamenuModal" tabindex="-1" aria-labelledby="editMegamenuModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="editMegamenuModalLabel">Add Megamenu</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form id="editMegamenuForm">
                    <div class="row g-3">
                        <!-- Image Upload Section - Now Full Width at Top -->
                        <div class="col-12">
                            <div class="card">
                                <div class="card-body p-3">
                                    <h6 class="mb-3">Menu Image</h6>
                                    <div class="image-upload-container">
                                        <div class="preview-area" style="width: 100%; height: 200px; border: 2px dashed #dee2e6; border-radius: 8px; overflow: hidden; position: relative; background: #f8f9fa; display: flex; align-items: center; justify-content: center;">
                                            <img id="menuImagePreview" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" alt="Preview" style="max-width: 100%; object-fit: cover; position: relative; z-index: 1;">
                                            <div id="uploadText" class="upload-text" style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); text-align: center; z-index: 2; width: 100%;">
                                                <span class="fas fa-cloud-upload-alt fs-2"></span>
                                                <p class="mb-0 mt-2">Click or drag image here</p>
                                                <small class="text-muted d-block mt-1">Recommended: 50x50px</small>
                                            </div>
                                        </div>
                                        <input type="file" class="d-none" id="menuImageUpload" accept="image/*">
                                        <div class="d-flex justify-content-between align-items-center mt-2">
                                            <small class="text-muted">JPG, PNG, SVG</small>
                                            <div>
                                                <button type="button" class="btn btn-falcon-default btn-sm" onclick="document.getElementById('menuImageUpload').click()">
                                                    <span class="fas fa-upload me-1"></span>Choose
                                                </button>
                                                <button type="button" id="removeImage" class="btn btn-link btn-sm text-danger d-none">
                                                    <span class="fas fa-times me-1"></span>Remove
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Form Fields -->
                        <div class="col-12">
                            <div class="card">
                                <div class="card-body">
                                    <div class="d-flex justify-content-between align-items-center mb-3">
                                        <h6 class="mb-0">Menu</h6>
                                        <div class="view-toggle-wrapper">
                                            <div class="btn-group" role="group" aria-label="Menu Type Toggle">
                                                <input type="radio" class="btn-check" name="menuType" id="textView" checked>
                                                <label class="btn btn-outline-primary" for="textView">
                                                    Text
                                                </label>
                                                
                                                <input type="radio" class="btn-check" name="menuType" id="listView">
                                                <label class="btn btn-outline-primary" for="listView">
                                                    List
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row g-3">
                                        <!-- Title -->
                                        <div class="col-12">
                                            <label class="form-label" for="menuTitle">Menu Title</label>
                                            <input type="text" class="form-control" id="menuTitle" required>
                                        </div>

                                        <!-- Description (shown only in Text mode) -->
                                        <div class="col-12" id="descriptionField">
                                            <label class="form-label" for="menuDescription">Description</label>
                                            <textarea class="form-control" id="menuDescription" rows="3" required></textarea>
                                        </div>

                                        <!-- List Fields (shown only in List mode) -->
                                        <div class="col-12 d-none" id="listFields">
                                            <div class="row g-3">
                                                <!-- Left Column -->
                                                <div class="col-md-4">
                                                    <div class="card">
                                                        <div class="card-header">
                                                            <h6 class="mb-0">Left Icon</h6>
                                                        </div>
                                                        <div class="card-body">
                                                            <div class="items-container mb-3">
                                                                <!-- Dynamic items will be added here -->
                                                            </div>
                                                            <div class="input-section pt-3">
                                                                <div class="mb-3">
                                                                    <div class="input-group mb-2">
                                                                        <span class="input-group-text">
                                                                            <i class="fas fa-icons"></i>
                                                                        </span>
                                                                        <input type="text" class="form-control icon-input" placeholder="Icon Class">
                                                                    </div>
                                                                    <textarea class="form-control desc-input" rows="2" placeholder="Column Description"></textarea>
                                                                </div>
                                                                <button type="button" class="btn btn-falcon-default btn-sm w-100 add-item" data-max="6">
                                                                    <span class="fas fa-plus me-1"></span>Add Item
                                                                </button>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                
                                                <!-- Middle Column -->
                                                <div class="col-md-4">
                                                    <div class="card">
                                                        <div class="card-header">
                                                            <h6 class="mb-0">Middle Icon</h6>
                                                        </div>
                                                        <div class="card-body">
                                                            <div class="items-container mb-3">
                                                                <!-- Dynamic items will be added here -->
                                                            </div>
                                                            <div class="input-section pt-3">
                                                                <div class="mb-3">
                                                                    <div class="input-group mb-2">
                                                                        <span class="input-group-text">
                                                                            <i class="fas fa-icons"></i>
                                                                        </span>
                                                                        <input type="text" class="form-control icon-input" placeholder="Icon Class">
                                                                    </div>
                                                                    <textarea class="form-control desc-input" rows="2" placeholder="Column Description"></textarea>
                                                                </div>
                                                                <button type="button" class="btn btn-falcon-default btn-sm w-100 add-item" data-max="6">
                                                                    <span class="fas fa-plus me-1"></span>Add Item
                                                                </button>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                
                                                <!-- Right Column -->
                                                <div class="col-md-4">
                                                    <div class="card">
                                                        <div class="card-header">
                                                            <h6 class="mb-0">Right Icon</h6>
                                                        </div>
                                                        <div class="card-body">
                                                            <div class="items-container mb-3">
                                                                <!-- Dynamic items will be added here -->
                                                            </div>
                                                            <div class="input-section pt-3">
                                                                <div class="mb-3">
                                                                    <div class="input-group mb-2">
                                                                        <span class="input-group-text">
                                                                            <i class="fas fa-icons"></i>
                                                                        </span>
                                                                        <input type="text" class="form-control icon-input" placeholder="Icon Class">
                                                                    </div>
                                                                    <textarea class="form-control desc-input" rows="2" placeholder="Column Description"></textarea>
                                                                </div>
                                                                <button type="button" class="btn btn-falcon-default btn-sm w-100 add-item" data-max="6">
                                                                    <span class="fas fa-plus me-1"></span>Add Item
                                                                </button>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- URL -->
                                        <div class="col-12">
                                            <label class="form-label" for="menuUrl">URL</label>
                                            <input type="url" class="form-control" id="menuUrl" placeholder="https://">
                                        </div>

                                        <!-- Status Switch -->
                                        <div class="col-12">
                                            <div class="form-check form-switch" ">
                                                <input class="form-check-input" type="checkbox" id="menuStatus" checked>
                                                <label class="form-check-label" for="menuStatus">
                                                    Menu Status
                                                    <span class="text-success status-text">Active</span>
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="submit" form="editMegamenuForm" class="btn btn-primary">Save Menu</button>
            </div>
        </div>
    </div>
</div>

<!-- Add this script at the bottom of the file -->
<script>
    // Handle image upload preview
    document.getElementById('menuImageUpload').addEventListener('change', function(e) {
        if (e.target.files && e.target.files[0]) {
            const reader = new FileReader();
            const preview = document.getElementById('menuImagePreview');
            const uploadText = document.getElementById('uploadText');
            const removeButton = document.getElementById('removeImage');

            reader.onload = function(e) {
                preview.src = e.target.result;
                uploadText.style.display = 'none';
                removeButton.classList.remove('d-none');
            };

            reader.readAsDataURL(e.target.files[0]);
        }
    });

    // Handle image removal
    document.getElementById('removeImage').addEventListener('click', function() {
        const preview = document.getElementById('menuImagePreview');
        const uploadText = document.getElementById('uploadText');
        const fileInput = document.getElementById('menuImageUpload');
        
        preview.src = 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7';
        uploadText.style.display = 'block';
        this.classList.add('d-none');
        fileInput.value = '';
    });

    // Handle status toggle
    document.getElementById('menuStatus').addEventListener('change', function() {
        const statusText = this.parentElement.querySelector('.status-text');
        if (this.checked) {
            statusText.textContent = 'Active';
            statusText.classList.remove('text-danger');
            statusText.classList.add('text-success');
        } else {
            statusText.textContent = 'Inactive';
            statusText.classList.remove('text-success');
            statusText.classList.add('text-danger');
        }
    });

    // Reset form when modal is hidden
    document.getElementById('editMegamenuModal').addEventListener('hidden.bs.modal', function() {
        // Reset the form
        document.getElementById('editMegamenuForm').reset();
        
        // Reset image preview
        const preview = document.getElementById('menuImagePreview');
        const uploadText = document.getElementById('uploadText');
        const removeButton = document.getElementById('removeImage');
        
        preview.src = 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7';
        uploadText.style.display = 'block';
        removeButton.classList.add('d-none');
        
        // Reset status switch
        const statusSwitch = document.getElementById('menuStatus');
        const statusText = statusSwitch.parentElement.querySelector('.status-text');
        statusSwitch.checked = true;
        statusText.textContent = 'Active';
        statusText.classList.remove('text-danger');
        statusText.classList.add('text-success');
        
        // Reset menu type to Text view
        document.getElementById('textView').checked = true;
        document.getElementById('listView').checked = false;
        
        // Show description field and hide list fields
        descriptionField.classList.remove('d-none');
        listFields.classList.add('d-none');
        document.getElementById('menuDescription').required = true;
    });

    // Update menu type toggle handler
    document.querySelectorAll('[name="menuType"]').forEach(radio => {
        radio.addEventListener('change', function() {
            const descriptionField = document.getElementById('descriptionField');
            const listFields = document.getElementById('listFields');
            
            if (this.id === 'textView') {
                // Text mode
                descriptionField.classList.remove('d-none');
                listFields.classList.add('d-none');
                document.getElementById('menuDescription').required = true;
            } else {
                // List mode
                descriptionField.classList.add('d-none');
                listFields.classList.remove('d-none');
                document.getElementById('menuDescription').required = false;
            }
        });
    });

    // Function to check and update button state
    function updateAddButtonState(container, button) {
        const maxItems = parseInt(button.dataset.max);
        const currentItems = container.children.length;
        button.disabled = currentItems >= maxItems;
        if (currentItems >= maxItems) {
            button.classList.add('disabled');
        } else {
            button.classList.remove('disabled');
        }
    }

    // Handle enter key on inputs
    document.querySelectorAll('.icon-input, .desc-input').forEach(input => {
        input.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                e.preventDefault();
                const cardBody = this.closest('.card-body');
                const iconInput = cardBody.querySelector('.icon-input');
                const descInput = cardBody.querySelector('.desc-input');
                const container = cardBody.querySelector('.items-container');
                const addButton = cardBody.querySelector('.add-item');
                
                // Only proceed if both fields have values
                if (iconInput.value.trim() && descInput.value.trim()) {
                    const maxItems = parseInt(addButton.dataset.max);
                    
                    if (container.children.length >= maxItems) {
                        alert(`Maximum ${maxItems} items allowed!`);
                        return;
                    }

                    const itemDiv = document.createElement('div');
                    itemDiv.className = 'menu-item mb-2';
                    itemDiv.innerHTML = `
                        <div class="d-flex justify-content-between align-items-center border-bottom pb-2">
                            <div class="d-flex align-items-center">
                                <i class="${iconInput.value}" style="font-size: 1rem; margin-right: 10px;"></i>
                                <span>${descInput.value}</span>
                            </div>
                            <button type="button" class="btn btn-sm delete-item">
                                <span class="fas fa-times"></span>
                            </button>
                        </div>
                    `;
                    
                    // Add to top of items container
                    container.appendChild(itemDiv);

                    // Clear inputs
                    iconInput.value = '';
                    descInput.value = '';
                    iconInput.focus();
                    
                    // Add delete handler
                    itemDiv.querySelector('.delete-item').addEventListener('click', function() {
                        itemDiv.remove();
                        // Update button state when item is removed
                        updateAddButtonState(container, addButton);
                    });

                    // Update button state
                    updateAddButtonState(container, addButton);
                }
            }
        });
    });

    // Update the Add Item button handler
    document.querySelectorAll('.add-item').forEach(button => {
        button.addEventListener('click', function() {
            const cardBody = this.closest('.card-body');
            const iconInput = cardBody.querySelector('.icon-input');
            const descInput = cardBody.querySelector('.desc-input');
            const container = cardBody.querySelector('.items-container');
            
            // Only proceed if both fields have values
            if (iconInput.value.trim() && descInput.value.trim()) {
                const maxItems = parseInt(this.dataset.max);
                
                if (container.children.length >= maxItems) {
                    alert(`Maximum ${maxItems} items allowed!`);
                    return;
                }

                const itemDiv = document.createElement('div');
                itemDiv.className = 'menu-item mb-2';
                itemDiv.innerHTML = `
                    <div class="d-flex justify-content-between align-items-center border-bottom pb-2">
                        <div class="d-flex align-items-center">
                            <i class="${iconInput.value}" style="font-size: 1rem; margin-right: 10px;"></i>
                            <span>${descInput.value}</span>
                        </div>
                        <button type="button" class="btn btn-sm delete-item">
                            <span class="fas fa-times"></span>
                        </button>
                    </div>
                `;
                
                // Add to top of items container
                container.appendChild(itemDiv);

                // Clear inputs
                iconInput.value = '';
                descInput.value = '';
                iconInput.focus();
                
                // Add delete handler
                itemDiv.querySelector('.delete-item').addEventListener('click', function() {
                    itemDiv.remove();
                    // Update button state when item is removed
                    updateAddButtonState(container, button);
                });

                // Update button state
                updateAddButtonState(container, button);
            }
        });
    });

    // Update the edit button click handler
    document.querySelectorAll('[data-bs-target="#editCategoryModal"]').forEach(button => {
        button.addEventListener('click', function(e) {
            e.preventDefault();
            
            // Get the row data
            const row = this.closest('tr');
            const imgSrc = row.querySelector('img').src;
            const title = row.querySelector('td:nth-child(2)').textContent;
            const isActive = row.querySelector('.badge-phoenix-success') !== null;
            
            // Get the modal
            const modal = document.getElementById('editMegamenuModal');
            modal.querySelector('.modal-title').textContent = 'Edit Megamenu';
            
            // Set image preview
            const preview = modal.querySelector('#menuImagePreview');
            const uploadText = modal.querySelector('#uploadText');
            const removeButton = modal.querySelector('#removeImage');
            
            preview.src = imgSrc;
            uploadText.style.display = 'none';
            removeButton.classList.remove('d-none');
            
            // Set title
            modal.querySelector('#menuTitle').value = title;
            
            // Set URL placeholder based on title
            const urlInput = modal.querySelector('#menuUrl');
            urlInput.value = `https://example.com/${title.toLowerCase()}`;
            urlInput.placeholder = `Enter ${title} URL`;
            
            // If title is "Cloud", set it as list view with predefined data
            if (title === 'Cloud') {
                // Switch to list view
                document.getElementById('listView').checked = true;
                document.getElementById('textView').checked = false;
                
                // Show list fields and hide description
                document.getElementById('descriptionField').classList.add('d-none');
                document.getElementById('listFields').classList.remove('d-none');
                
                // Predefined list data for Cloud with 6 items per column
                const listData = {
                    columns: {
                        left: [
                            { icon: 'fas fa-cloud', text: 'Cloud Storage', url: 'https://example.com/cloud/storage' },
                            { icon: 'fas fa-server', text: 'Cloud Servers', url: 'https://example.com/cloud/servers' },
                            { icon: 'fas fa-database', text: 'Cloud Database', url: 'https://example.com/cloud/database' },
                            { icon: 'fas fa-hdd', text: 'Block Storage', url: 'https://example.com/cloud/block-storage' },
                            { icon: 'fas fa-network-wired', text: 'CDN', url: 'https://example.com/cloud/cdn' },
                            { icon: 'fas fa-memory', text: 'Cache', url: 'https://example.com/cloud/cache' }
                        ],
                        middle: [
                            { icon: 'fas fa-shield-alt', text: 'Cloud Security', url: 'https://example.com/cloud/security' },
                            { icon: 'fas fa-sync', text: 'Auto Scaling', url: 'https://example.com/cloud/auto-scaling' },
                            { icon: 'fas fa-balance-scale', text: 'Load Balancer', url: 'https://example.com/cloud/load-balancer' },
                            { icon: 'fas fa-project-diagram', text: 'Kubernetes', url: 'https://example.com/cloud/kubernetes' },
                            { icon: 'fas fa-cube', text: 'Docker Containers', url: 'https://example.com/cloud/containers' },
                            { icon: 'fas fa-microchip', text: 'Serverless', url: 'https://example.com/cloud/serverless' }
                        ],
                        right: [
                            { icon: 'fas fa-chart-line', text: 'Analytics', url: 'https://example.com/cloud/analytics' },
                            { icon: 'fas fa-clock', text: 'Monitoring', url: 'https://example.com/cloud/monitoring' },
                            { icon: 'fas fa-tools', text: 'Management', url: 'https://example.com/cloud/management' },
                            { icon: 'fas fa-terminal', text: 'CLI Tools', url: 'https://example.com/cloud/cli-tools' },
                            { icon: 'fas fa-code', text: 'API Gateway', url: 'https://example.com/cloud/api-gateway' },
                            { icon: 'fas fa-key', text: 'IAM', url: 'https://example.com/cloud/iam' }
                        ]
                    }
                };
                
                // Populate list items
                ['left', 'middle', 'right'].forEach((position, index) => {
                    const container = modal.querySelectorAll('.items-container')[index];
                    container.innerHTML = ''; // Clear existing items
                    
                    listData.columns[position].forEach(item => {
                        const itemDiv = document.createElement('div');
                        itemDiv.className = 'menu-item mb-2';
                        itemDiv.innerHTML = `
                            <div class="d-flex justify-content-between align-items-center border-bottom pb-2">
                                <div class="d-flex align-items-center">
                                    <i class="${item.icon}" style="font-size: 1rem; margin-right: 10px;"></i>
                                    <span>${item.text}</span>
                                </div>
                                <button type="button" class="btn btn-sm delete-item">
                                    <span class="fas fa-times"></span>
                                </button>
                            </div>
                        `;
                        
                        container.appendChild(itemDiv);
                        
                        // Add delete handler
                        itemDiv.querySelector('.delete-item').addEventListener('click', function() {
                            itemDiv.remove();
                            updateAddButtonState(container, container.parentElement.querySelector('.add-item'));
                        });
                    });
                    
                    // Update add button states
                    updateAddButtonState(container, container.parentElement.querySelector('.add-item'));
                });
            } else {
                // Default to text view for other items
                document.getElementById('textView').checked = true;
                document.getElementById('listView').checked = false;
                
                // Show description field and hide list fields
                document.getElementById('descriptionField').classList.remove('d-none');
                document.getElementById('listFields').classList.add('d-none');
                
                // Set description
                modal.querySelector('#menuDescription').value = row.querySelector('td:nth-child(3)').textContent;
            }
            
            // Set status
            modal.querySelector('#menuStatus').checked = isActive;
            const statusText = modal.querySelector('.status-text');
            statusText.textContent = isActive ? 'Active' : 'Inactive';
            statusText.className = `status-text ${isActive ? 'text-success' : 'text-danger'}`;
            
            // Show the modal
            const bsModal = new bootstrap.Modal(modal);
            bsModal.show();
        });
    });

    // Update form submission handler to handle both create and edit
    document.getElementById('editMegamenuForm').addEventListener('submit', function(e) {
        e.preventDefault();
        
        const modal = document.getElementById('editMegamenuModal');
        const isEdit = modal.querySelector('.modal-title').textContent === 'Edit Megamenu';
        
        // Get form data
        const formData = {
            image: modal.querySelector('#menuImagePreview').src,
            title: modal.querySelector('#menuTitle').value,
            isActive: modal.querySelector('#menuStatus').checked,
            type: modal.querySelector('#textView').checked ? 'text' : 'list'
        };
        
        if (formData.type === 'text') {
            formData.description = modal.querySelector('#menuDescription').value;
        } else {
            formData.columns = {
                left: [],
                middle: [],
                right: []
            };
            
            // Get list items for each column
            modal.querySelectorAll('.items-container').forEach((container, index) => {
                const position = ['left', 'middle', 'right'][index];
                container.querySelectorAll('.menu-item').forEach(item => {
                    formData.columns[position].push({
                        icon: item.querySelector('i').className,
                        text: item.querySelector('span').textContent
                    });
                });
            });
        }
        
        // Here you would typically send the formData to your backend
        console.log('Form submitted:', formData);
        
        // Close the modal
        const bsModal = bootstrap.Modal.getInstance(modal);
        bsModal.hide();
    });
</script>

<!-- Add this CSS -->
<style>
    /* Custom styling for the toggle switch */
    .form-check-input:checked {
        background-color: var(--phoenix-primary) !important;
        border-color: var(--phoenix-primary) !important;
    }
    
    .form-check-input {
        background-color: #ddd;
        border-color: #ddd;
        transition: all 0.2s ease;
    }
    
    .form-check-input:focus {
        border-color: var(--phoenix-primary);
        box-shadow: 0 0 0 0.25rem rgba(var(--phoenix-primary-rgb), 0.25);
    }

    .fs-sm {
        font-size: 0.875rem;
    }

    .menu-type-text {
        font-weight: 500;
        transition: all 0.2s ease;
    }

    .form-switch {
        display: flex;
        align-items: center;
        gap: 0.3rem;
        padding-left: 0 !important; /* Remove default padding */
        margin-left: -5px; /* Move slightly to the left */
    }

    .form-switch .form-check-input {
        width: 32px;
        height: 16px;
        cursor: pointer;
        margin-top: 0;
        margin-left: 8px; /* Add small margin to prevent touching edge */
        flex-shrink: 0;
    }

    .form-check-label {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        margin-bottom: 0;
        padding-left: 8px; /* Add padding to label for spacing */
    }

    .menu-type-text {
        font-weight: 500;
        transition: all 0.2s ease;
        display: inline-flex;
        align-items: center;
    }

    .menu-type-text.text-success {
        color: var(--phoenix-success) !important;
        font-weight: 700;
    }
    
    .menu-type-text.text-primary {
        color: var(--phoenix-success) !important;
        font-weight: 700;
    }

    .view-toggle-wrapper .btn-group {
        background: #fff;
        border-radius: 40px;
        padding: 2px;
        border: 1px solid #dee2e6;
    }

    .view-toggle-wrapper .btn {
        border-radius: 40px;
        font-size: 13px;
        border: none;
        background: transparent;
        color: #5e6e82;
        min-width: 70px;
        padding: 3px 12px;
        font-weight: 500;
    }

    .view-toggle-wrapper .btn-check:checked + .btn {
        background: var(--phoenix-primary);
        color: #fff;
    }

    .view-toggle-wrapper .btn:hover:not(.btn-check:checked + .btn) {
        background: rgba(var(--phoenix-primary-rgb), 0.1);
    }

    /* Add these styles to your existing CSS */
    .btn-falcon-default.disabled,
    .btn-falcon-default:disabled {
        background-color: #f8f9fa;
        color: #95aac9;
        cursor: not-allowed;
        opacity: 0.65;
        pointer-events: none;
        border: none;
    }

    .btn-falcon-default.disabled .fas,
    .btn-falcon-default:disabled .fas {
        opacity: 0.65;
    }

    /* Optional: Add a subtle transition */
    .btn-falcon-default {
        transition: all 0.2s ease-in-out;
    }
</style>
