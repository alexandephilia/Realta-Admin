<!DOCTYPE html>
<h4 class="mb-3 text-body mb-0">Micro Pages</h4>
<div class="card">
    <div class="card-body">
        <div class="text-end">
            <button class="btn btn-primary btn-sm" data-bs-toggle="modal" data-bs-target="#createCategoryModal">
                <span class="fas fa-plus me-2"></span>Add Pages
            </button>
        </div>

        <!-- Create Category Modal -->
        <div class="modal fade" id="createCategoryModal" tabindex="-1" aria-labelledby="createCategoryModalLabel"
            aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="createCategoryModalLabel">Add New Category</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <form id="createCategoryForm">
                            <div class="mb-3">
                                <label class="form-label" for="categoryName">Category Name</label>
                                <input type="text" class="form-control" id="categoryName" placeholder="Enter category name">
                            </div>
                            <div class="mb-3">
                                <label class="form-label" for="categorySlug">URL Slug</label>
                                <input type="text" class="form-control" id="categorySlug" placeholder="enter-url-slug">
                            </div>
                            <div class="d-flex justify-content-end">
                                <div class="form-check form-switch">
                                    <input class="form-check-input" type="checkbox" id="categoryStatus" checked>
                                    <label class="form-check-label" for="categoryStatus">
                                        Status: <span class="text-success status-text">Active</span>
                                    </label>
                                </div>
                            </div>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-outline-primary" data-bs-dismiss="modal">Cancel</button>
                        <button type="submit" form="createCategoryForm" class="btn btn-primary">Save Category</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Table Section -->
        <div class="table-responsive mt-4">
            <table class="table table-hover" id="categoriesTable">
                <thead>
                    <tr>
                        <th class="text-center">Category Name</th>
                        <th class="text-center">URL Slug</th>
                        <th class="text-center">Status</th>
                        <th class="text-center">Action</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td class="text-center">Bimasakti</td>
                        <td class="text-center">/bimasakti</td>
                        <td class="text-center">
                            <span class="badge badge-phoenix fs-10 badge-phoenix-success">
                                <span class="fa fa-check"></span>
                            </span>
                        </td>
                        <td class="text-center">
                            <button class="btn btn-sm btn-falcon-default text-danger" data-bs-toggle="modal"
                                data-bs-target="#deleteCategoryModal">
                                <span class="fas fa-trash-alt"></span>
                            </button>
                            <button class="btn btn-sm btn-falcon-default text-warning" data-bs-toggle="modal"
                                data-bs-target="#editCategoryModal">
                                <span class="fas fa-edit me-2"></span>Edit
                            </button>
                        </td>
                    </tr>
                    <tr>
                        <td class="text-center">Rhapsody</td>
                        <td class="text-center">/rhapsody</td>
                        <td class="text-center">
                            <span class="badge badge-phoenix fs-10 badge-phoenix-success">
                                <span class="fa fa-check"></span>
                            </span>
                        </td>
                        <td class="text-center">
                            <button class="btn btn-sm btn-falcon-default text-danger" data-bs-toggle="modal"
                                data-bs-target="#deleteCategoryModal">
                                <span class="fas fa-trash-alt"></span>
                            </button>
                            <button class="btn btn-sm btn-falcon-default text-warning" data-bs-toggle="modal"
                                data-bs-target="#editCategoryModal">
                                <span class="fas fa-edit me-2"></span>Edit
                            </button>
                        </td>
                    </tr>
                    <tr>
                        <td class="text-center">Main Site</td>
                        <td class="text-center">/main</td>
                        <td class="text-center">
                            <span class="badge badge-phoenix fs-10 badge-phoenix-danger">
                                <span class="fa fa-xmark"></span>
                            </span>
                        </td>
                        <td class="text-center">
                            <button class="btn btn-sm btn-falcon-default text-danger" data-bs-toggle="modal"
                                data-bs-target="#deleteCategoryModal">
                                <span class="fas fa-trash-alt"></span>
                            </button>
                            <button class="btn btn-sm btn-falcon-default text-warning" data-bs-toggle="modal"
                                data-bs-target="#editCategoryModal">
                                <span class="fas fa-edit me-2"></span>Edit
                            </button>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- Delete Category Modal -->
        <div class="modal fade" id="deleteCategoryModal" tabindex="-1" aria-labelledby="deleteCategoryModalLabel"
            aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="deleteCategoryModalLabel">Delete Category</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <p>Are you sure you want to delete this category? This action cannot be undone.</p>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-outline-primary" data-bs-dismiss="modal">Cancel</button>
                        <button type="button" class="btn btn-danger" onclick="confirmDelete()">Delete</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Edit Category Modal -->
        <div class="modal fade" id="editCategoryModal" tabindex="-1" aria-labelledby="editCategoryModalLabel"
            aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="editCategoryModalLabel">Edit Category</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <form id="editCategoryForm">
                            <input type="hidden" id="editCategoryId">
                            <div class="mb-3">
                                <label class="form-label" for="editCategoryName">Category Name</label>
                                <input type="text" class="form-control" id="editCategoryName" placeholder="Enter category name">
                            </div>
                            <div class="mb-3">
                                <label class="form-label" for="editCategorySlug">URL Slug</label>
                                <input type="text" class="form-control" id="editCategorySlug" placeholder="enter-url-slug">
                            </div>
                            <div class="d-flex justify-content-end">
                                <div class="form-check form-switch">
                                    <input class="form-check-input" type="checkbox" id="editCategoryStatus" checked>
                                    <label class="form-check-label" for="editCategoryStatus">
                                        Status: <span class="text-success status-text">Active</span>
                                    </label>
                                </div>
                            </div>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-outline-primary" data-bs-dismiss="modal">Cancel</button>
                        <button type="submit" form="editCategoryForm" class="btn btn-primary">Save Changes</button>
                    </div>
                </div>
            </div>
        </div>

        <script>
            // Handle category status toggle for both create and edit modals
            ['categoryStatus', 'editCategoryStatus'].forEach(id => {
                document.getElementById(id).addEventListener('change', function() {
                    const statusText = this.closest('.form-check').querySelector('.status-text');
                    if (this.checked) {
                        statusText.textContent = 'Active';
                        statusText.classList.remove('text-danger');
                        statusText.classList.add('text-success');
                    } else {
                        statusText.textContent = 'Inactive';
                        statusText.classList.remove('text-success');
                        statusText.classList.add('text-danger');
                    }
                });
            });

            // Function to populate edit modal with row data
            function populateEditModal(button) {
                const row = button.closest('tr');
                const categoryName = row.cells[0].textContent.trim();
                const categorySlug = row.cells[1].textContent.trim();
                const isActive = row.cells[2].querySelector('.badge-phoenix-success') !== null;

                document.getElementById('editCategoryName').value = categoryName;
                document.getElementById('editCategorySlug').value = categorySlug;
                
                const statusToggle = document.getElementById('editCategoryStatus');
                statusToggle.checked = isActive;
                const statusText = statusToggle.closest('.form-check').querySelector('.status-text');
                if (isActive) {
                    statusText.textContent = 'Active';
                    statusText.classList.remove('text-danger');
                    statusText.classList.add('text-success');
                } else {
                    statusText.textContent = 'Inactive';
                    statusText.classList.remove('text-success');
                    statusText.classList.add('text-danger');
                }
            }

            // Add click handlers to edit buttons
            document.querySelectorAll('[data-bs-target="#editCategoryModal"]').forEach(button => {
                button.addEventListener('click', function() {
                    populateEditModal(this);
                });
            });

            // Function to confirm delete
            function confirmDelete() {
                // Add your delete logic here
                bootstrap.Modal.getInstance(document.getElementById('deleteCategoryModal')).hide();
            }
        </script>
    </div>
</div> 