<div class="card mb-3">
    <img src="assets\img\gallery\tokyo-2.png" class="rounded">
</div>
<div class="card">
    <div class="card-body p-3">
        <div class="d-flex justify-content-between align-items-center mb-3">
            <h4 class="text-body mb-0">Last 5 Activity</h4>
            <div class="d-flex gap-2">
                <input type="text" class="form-control form-control-sm" placeholder="Search activities..."
                    id="activitySearch">
                <button class="btn btn-sm btn-primary" id="refreshActivity">
                    <i class="fas fa-sync-alt refresh-icon"></i>
                </button>
            </div>
        </div>
        <div class="table-responsive">
            <table class="table table-hover mt-3" id="activityTable">
                <thead>
                    <tr class="bg-light">
                        <th scope="col" class="text-center" style="width: 33%;">User</th>
                        <th scope="col" class="text-center" style="width: 33%;">Pages</th>
                        <th scope="col" class="text-center" style="width: 34%;">Time</th>
                    </tr>
                </thead>
                <tbody>
                    <tr class="activity-row cursor-pointer transition-all hover:bg-light">
                        <td class="mb-0 fs-9 text-body text-center">
                            <span class="fw-semibold">Khailal</span>
                        </td>
                        <td class="mb-0 fs-9 text-body text-center">
                            <span class="text-primary">Master site</span>
                        </td>
                        <td class="mb-0 fs-9 text-body text-center">
                            <span class="text-muted">09 August 2024, 13:25</span>
                        </td>
                    </tr>
                    <tr class="activity-row cursor-pointer transition-all hover:bg-light">
                        <td class="mb-0 fs-9 text-body text-center">
                            <span class="fw-semibold">Ratna</span>
                        </td>
                        <td class="mb-0 fs-9 text-body text-center">
                            <span class="text-primary">Solution</span>
                        </td>
                        <td class="mb-0 fs-9 text-body text-center">
                            <span class="text-muted">11 Agustus 2024, 12:00</span>
                        </td>
                    </tr>
                    <tr class="activity-row cursor-pointer transition-all hover:bg-light">
                        <td class="mb-0 fs-9 text-body text-center">
                            <span class="fw-semibold">Mefa</span>
                        </td>
                        <td class="mb-0 fs-9 text-body text-center">
                            <span class="text-primary">Industri</span>
                        </td>
                        <td class="mb-0 fs-9 text-body text-center">
                            <span class="text-muted">21 April 2024, 11:00</span>
                        </td>
                    </tr>
                    <tr class="activity-row cursor-pointer transition-all hover:bg-light">
                        <td class="mb-0 fs-9 text-body text-center">
                            <span class="fw-semibold">Tamrin</span>
                        </td>
                        <td class="mb-0 fs-9 text-body text-center">
                            <span class="text-primary">Logo Section</span>
                        </td>
                        <td class="mb-0 fs-9 text-body text-center">
                            <span class="text-muted">24 Juli 2024, 10:00</span>
                        </td>
                    </tr>
                    <tr class="activity-row cursor-pointer transition-all hover:bg-light">
                        <td class="mb-0 fs-9 text-body text-center">
                            <span class="fw-semibold">Harry</span>
                        </td>
                        <td class="mb-0 fs-9 text-body text-center">
                            <span class="text-primary">Blog</span>
                        </td>
                        <td class="mb-0 fs-9 text-body text-center">
                            <span class="text-muted">11 Juli 2024, 10:00</span>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="d-flex justify-content-between align-items-center mt-3">
            <span class="text-muted fs-9">Last updated: <span id="lastUpdateTime">Just now</span></span>
            <!-- <button class="btn btn-sm btn-link view-all-activities">View All Activities</button> -->
        </div>
    </div>
</div>

<style>
    .activity-row {
        transition: all 0.2s ease;
    }

    .activity-row:hover {
        transform: translateY(-1px);
        /* box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1); */
    }

    .refresh-icon {
        display: inline-block;
        transition: none;
    }

    .refresh-icon.spinning {
        animation: spin 1s linear;
    }

    @keyframes spin {
        from {
            transform: rotate(0deg);
        }
        to {
            transform: rotate(360deg);
        }
    }

    /* Update skeleton styles to match content dimensions with shimmer */
    .skeleton {
        position: relative;
        background: #f0f0f0;
        border-radius: 4px;
        overflow: hidden;
        height: 16px; /* Match the content text height */
    }

    /* Add back the shimmer effect */
    .skeleton::after {
        content: "";
        position: absolute;
        top: 0;
        right: 0;
        bottom: 0;
        left: 0;
        transform: translateX(-100%);
        background-image: linear-gradient(
            90deg,
            rgba(255, 255, 255, 0) 0,
            rgba(255, 255, 255, 0.2) 20%,
            rgba(255, 255, 255, 0.5) 60%,
            rgba(255, 255, 255, 0)
        );
        animation: shimmer 2s infinite;
    }

    @keyframes shimmer {
        100% {
            transform: translateX(100%);
        }
    }

    .skeleton-row td {
        padding: 12px 8px;
        vertical-align: middle;
    }

    /* Specific widths for different columns */
    .skeleton-user {
        width: 80px; /* Approximate width for usernames */
        margin: 0 auto; /* Center in td */
    }

    .skeleton-page {
        width: 100px; /* Approximate width for page names */
        margin: 0 auto;
    }

    .skeleton-time {
        width: 140px; /* Approximate width for timestamps */
        margin: 0 auto;
    }

    /* Hide skeleton by default */
    .skeleton-template {
        display: none;
    }
</style>

<script id="skeleton-template" type="text/template">
    <tr class="skeleton-row">
        <td class="text-center">
            <div class="skeleton skeleton-user"></div>
        </td>
        <td class="text-center">
            <div class="skeleton skeleton-page"></div>
        </td>
        <td class="text-center">
            <div class="skeleton skeleton-time"></div>
        </td>
    </tr>
</script>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        // Search functionality
        const searchInput = document.getElementById('activitySearch');
        searchInput.addEventListener('input', function () {
            const searchTerm = this.value.toLowerCase();
            const rows = document.querySelectorAll('.activity-row');

            rows.forEach(row => {
                const text = row.textContent.toLowerCase();
                row.style.display = text.includes(searchTerm) ? '' : 'none';
            });
        });

        // Update last update time
        setInterval(() => {
            const lastUpdate = document.getElementById('lastUpdateTime');
            const time = new Date();
            lastUpdate.textContent = time.toLocaleTimeString();
        }, 60000);
    });
</script>